(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{3535:function(e,s,t){Promise.resolve().then(t.bind(t,4076))},4076:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(7437),r=t(2265),l=t(9376),i=t(3949),n=t(7648),d=t(283),c=t(5638);function o(){var e,s,t,o,x,h;let m=(0,l.useSearchParams)().get("address"),{t:p}=(0,i.$G)(),[u,g]=(0,r.useState)(m||""),[v,b]=(0,r.useState)(!1),[j,f]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),[y,k]=(0,r.useState)("graph");(0,r.useEffect)(()=>{m&&_(m)},[m]);let _=async e=>{if(!e.trim()){w("Please enter a valid address");return}b(!0),w(null),f(null);try{let s="https://8000-ivlgiy6lj3133qnp3avrh-b32ec7bb.sandbox.novita.ai",t=await fetch("".concat(s,"/api/v1/graph/address/").concat(e,"?depth=3"));if(!t.ok)throw Error("API Error: ".concat(t.status));let a=await t.json(),r=localStorage.getItem("i18nextLng")||"en",l=await fetch("".concat(s,"/api/v1/ml/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,depth:3,include_patterns:!0,include_anomalies:!0,include_risk_score:!0,include_narrative:!0,language:r})}),i=l.ok?await l.json():null;f({graph:a,analysis:i})}catch(e){var s,t,a,r;console.error("Investigation error:",e),w(e.message||"Failed to fetch data. Please check your connection and try again."),(null===(s=e.message)||void 0===s?void 0:s.includes("Failed to fetch"))?w(p("errors.fetchFailed")):(null===(t=e.message)||void 0===t?void 0:t.includes("404"))?w(p("errors.notFound")):(null===(a=e.message)||void 0===a?void 0:a.includes("400"))?w(p("errors.invalidAddress")):(null===(r=e.message)||void 0===r?void 0:r.includes("500"))?w(p("errors.serverError")):w(p("errors.generic"))}finally{b(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,a.jsx)("nav",{className:"border-b border-white/10 bg-black/20 backdrop-blur-lg",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,a.jsxs)(n.default,{href:"/",className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:"MetaSleuth NextGen"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(c.W,{}),(0,a.jsx)(n.default,{href:"/dashboard",className:"rounded-lg px-4 py-2 text-sm font-medium text-white/80 transition hover:bg-white/10 hover:text-white",children:"Dashboard"})]})]})})}),(0,a.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,a.jsx)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 backdrop-blur-lg",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&_(u),placeholder:p("search.placeholder"),className:"flex-1 rounded-lg bg-white/90 px-6 py-3 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,a.jsx)("button",{onClick:()=>_(u),disabled:v,className:"rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 px-8 py-3 font-semibold text-white transition hover:from-purple-700 hover:to-pink-700 disabled:cursor-not-allowed disabled:opacity-50",children:v?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p("loading")]}):p("search.button")})]})}),N&&(0,a.jsx)("div",{className:"mt-6 rounded-lg border border-red-500/50 bg-red-500/10 p-4 text-red-300",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),N]})}),j&&(0,a.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto rounded-xl border border-white/10 bg-white/5 p-2 backdrop-blur-lg",children:[{id:"graph",label:p("tabs.graph"),icon:"\uD83D\uDD78️"},{id:"patterns",label:p("tabs.patterns"),icon:"\uD83D\uDD0D"},{id:"risk",label:p("tabs.risk"),icon:"⚠️"},{id:"narrative",label:p("tabs.narrative"),icon:"\uD83D\uDCC4"}].map(e=>(0,a.jsxs)("button",{onClick:()=>k(e.id),className:"flex-1 whitespace-nowrap rounded-lg px-4 py-3 text-sm font-medium transition ".concat(y===e.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-white/60 hover:bg-white/10 hover:text-white"),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur-lg",children:["graph"===y&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"mb-4 text-2xl font-bold text-white",children:p("graph.title")}),(null===(e=j.graph)||void 0===e?void 0:e.nodes)&&(null===(s=j.graph)||void 0===s?void 0:s.edges)&&j.graph.nodes.length>0?(0,a.jsxs)("div",{className:"rounded-lg bg-white/10 p-4",children:[(0,a.jsx)("div",{className:"mb-3 text-sm text-white/70",children:p("graph.stats",{nodes:j.graph.nodes.length,edges:j.graph.edges.length})}),(0,a.jsx)(d.p,{nodes:j.graph.nodes,edges:j.graph.edges,onNodeClick:e=>{console.log("Node clicked:",e)},onEdgeClick:e=>{console.log("Edge clicked:",e)},height:"600px"})]}):(0,a.jsxs)("div",{className:"rounded-lg bg-white/10 p-12 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{className:"text-white/60 text-lg mb-2",children:p("graph.empty.title")}),(0,a.jsx)("div",{className:"text-white/40 text-sm",children:p("graph.empty.description")})]})]}),"patterns"===y&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"mb-4 text-2xl font-bold text-white",children:p("patterns.title")}),(null===(o=j.analysis)||void 0===o?void 0:null===(t=o.patterns)||void 0===t?void 0:t.length)>0?(0,a.jsx)("div",{className:"space-y-4",children:j.analysis.patterns.map((e,s)=>(0,a.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:p("patterns.types.".concat(e.pattern_type||e.type),{defaultValue:e.pattern_type||e.type})}),(0,a.jsx)("p",{className:"mt-2 text-gray-300",children:e.description}),e.evidence&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-white/80",children:[p("patterns.evidence"),":"]}),(0,a.jsx)("ul",{className:"mt-2 space-y-1 text-sm text-gray-400",children:e.evidence.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]})]}),(0,a.jsxs)("div",{className:"ml-4 flex flex-col items-end gap-2",children:[(0,a.jsx)("span",{className:"rounded-full px-3 py-1 text-sm font-medium ".concat(e.confidence>.8?"bg-red-500/20 text-red-300":e.confidence>.5?"bg-yellow-500/20 text-yellow-300":"bg-green-500/20 text-green-300"),children:p("patterns.confidence",{value:Math.round(100*e.confidence)})}),e.severity&&(0,a.jsx)("span",{className:"text-sm text-white/60",children:p("patterns.severity",{level:e.severity})})]})]})},s))}):(0,a.jsxs)("div",{className:"rounded-lg bg-white/10 p-12 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsx)("div",{className:"text-white/60 text-lg",children:p("patterns.empty")})]})]}),"risk"===y&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"mb-4 text-2xl font-bold text-white",children:p("risk.title")}),(null===(x=j.analysis)||void 0===x?void 0:x.risk_assessment)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-6xl font-bold text-white",children:j.analysis.risk_assessment.overall_score||0}),(0,a.jsx)("div",{className:"mt-2 text-lg text-gray-400",children:p("risk.overallScore")}),(0,a.jsx)("div",{className:"mt-4 inline-block rounded-full px-4 py-2 text-sm font-medium ".concat((j.analysis.risk_assessment.overall_score||0)>70?"bg-red-500/20 text-red-300":(j.analysis.risk_assessment.overall_score||0)>40?"bg-yellow-500/20 text-yellow-300":"bg-green-500/20 text-green-300"),children:p("risk.levels.".concat(j.analysis.risk_assessment.risk_level),{defaultValue:j.analysis.risk_assessment.risk_level||"Unknown"})})]})}),j.analysis.risk_assessment.factors&&(0,a.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-white",children:p("risk.contributingFactors")}),(0,a.jsx)("div",{className:"space-y-3",children:j.analysis.risk_assessment.factors.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-300",children:e.name||e}),(0,a.jsx)("span",{className:"text-white",children:p("risk.levels.".concat(e.impact||e.score),{defaultValue:e.impact||e.score})})]},s))})]})]}):(0,a.jsxs)("div",{className:"rounded-lg bg-white/10 p-12 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⚠️"}),(0,a.jsx)("div",{className:"text-white/60 text-lg",children:p("risk.empty")})]})]}),"narrative"===y&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"mb-4 text-2xl font-bold text-white",children:p("narrative.title")}),(null===(h=j.analysis)||void 0===h?void 0:h.narrative)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-6",children:(0,a.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-gray-300",children:"string"==typeof j.analysis.narrative?j.analysis.narrative:j.analysis.narrative.summary||JSON.stringify(j.analysis.narrative,null,2)})})}),(0,a.jsx)("button",{className:"rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-3 font-semibold text-white transition hover:from-purple-700 hover:to-pink-700",children:p("narrative.exportPdf")})]}):(0,a.jsxs)("div",{className:"rounded-lg bg-white/10 p-12 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC4"}),(0,a.jsx)("div",{className:"text-white/60 text-lg",children:p("narrative.empty")})]})]})]})]}),!v&&!j&&!N&&(0,a.jsxs)("div",{className:"mt-12 text-center",children:[(0,a.jsx)("div",{className:"inline-flex h-24 w-24 items-center justify-center rounded-full bg-white/5",children:(0,a.jsx)("svg",{className:"h-12 w-12 text-white/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("h3",{className:"mt-6 text-xl font-semibold text-white",children:p("investigation.ready")}),(0,a.jsx)("p",{className:"mt-2 text-gray-400",children:p("investigation.enterAddress")})]})]})]})}function x(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})}),children:(0,a.jsx)(o,{})})}},5638:function(e,s,t){"use strict";t.d(s,{W:function(){return l}});var a=t(7437);t(2265);var r=t(3949);let l=()=>{let{i18n:e}=(0,r.$G)();return(0,a.jsxs)("button",{onClick:()=>{let s="en"===e.language?"ja":"en";e.changeLanguage(s)},className:"flex items-center gap-2 rounded-lg bg-white/10 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-white/20",title:"Change Language / 言語を変更",children:[(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),(0,a.jsx)("span",{children:"ja"===e.language?"English":"日本語"})]})}}},function(e){e.O(0,[264,949,448,283,971,117,744],function(){return e(e.s=3535)}),_N_E=e.O()}]);