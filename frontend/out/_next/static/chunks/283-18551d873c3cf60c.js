"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{283:function(e,t,a){a.d(t,{p:function(){return o}});var r=a(7437),s=a(2265),n=a(3949),l=a(9516);let o=e=>{let{nodes:t,edges:a,onNodeClick:o,onEdgeClick:i,height:c="600px",className:d=""}=e,{t:h}=(0,n.$G)(),u=(0,s.useRef)(null),m=(0,s.useRef)(null),[p,x]=(0,s.useState)(null),[g,b]=(0,s.useState)(null),[f,v]=(0,s.useState)("breadthfirst"),j=e=>{switch(e){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#22c55e";default:return"#64748b"}},w=e=>{switch(e){case"wallet":return"#3b82f6";case"exchange":return"#8b5cf6";case"mixer":return"#ef4444";case"contract":return"#06b6d4";default:return"#94a3b8"}};(0,s.useEffect)(()=>{if(!u.current||0===t.length)return;let e=(0,l.Z)({container:u.current,elements:[...t.map(e=>({data:{...e,id:e.id,label:e.label||e.address.substring(0,10)+"..."}})),...a.map(e=>({data:{...e,id:e.id,source:e.source,target:e.target,label:"".concat(e.amount," ETH")}}))],style:[{selector:"node",style:{"background-color":function(e){let t=e.data();return t.isSanctioned?"#dc2626":w(t.nodeType)},label:"data(label)","text-valign":"center","text-halign":"center",color:"#ffffff","text-outline-color":"#000000","text-outline-width":2,"font-size":"14px","font-weight":"bold","text-wrap":"wrap","text-max-width":"80px",width:function(e){let t=e.data();return t.balance?Math.min(50+3*t.balance,120):50},height:function(e){let t=e.data();return t.balance?Math.min(50+3*t.balance,120):50},"border-width":function(e){return"high"===e.data().riskLevel?5:3},"border-color":function(e){return j(e.data().riskLevel)}}},{selector:"edge",style:{width:function(e){return Math.min(Math.max(e.data().amount/2,2),8)},"line-color":function(e){return e.data().isSuspicious?"#ef4444":"#94a3b8"},"target-arrow-color":function(e){return e.data().isSuspicious?"#ef4444":"#94a3b8"},"target-arrow-shape":"triangle","arrow-scale":1.5,"curve-style":"bezier",label:"data(label)","font-size":"11px","font-weight":"bold",color:"#1e293b","text-background-color":"#ffffff","text-background-opacity":.8,"text-background-padding":"3px","text-rotation":"autorotate","text-margin-y":-10}},{selector:":selected",style:{"border-width":4,"border-color":"#0ea5e9","background-color":"#0ea5e9"}},{selector:"node:active",style:{"overlay-color":"#0ea5e9","overlay-padding":10,"overlay-opacity":.2}}],layout:{name:"breadthfirst",directed:!0,spacingFactor:1.5,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!0},minZoom:.3,maxZoom:3,wheelSensitivity:.2});return e.on("tap","node",e=>{let t=e.target.data();x(t),b(null),o&&o(t)}),e.on("tap","edge",e=>{let t=e.target.data();b(t),x(null),i&&i(t)}),e.on("tap",t=>{t.target===e&&(x(null),b(null))}),e.on("cxttap","node",e=>{e.preventDefault()}),m.current=e,()=>{e.destroy()}},[t,a,o,i]);let y=e=>{m.current&&(v(e),m.current.layout({breadthfirst:{name:"breadthfirst",directed:!0,spacingFactor:1.5,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!0},circle:{name:"circle",animate:!0,animationDuration:1e3,avoidOverlap:!0,spacingFactor:1.5},concentric:{name:"concentric",animate:!0,animationDuration:1e3,avoidOverlap:!0,spacingFactor:1.5,concentric:function(e){let t=e.data();return t.isSanctioned?100:"high"===t.riskLevel?80:"medium"===t.riskLevel?60:40},levelWidth:function(){return 2}}}[e]).run())};return(0,r.jsxs)("div",{className:"relative ".concat(d),children:[(0,r.jsxs)("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-white p-2 shadow-md",children:[(0,r.jsx)("div",{className:"mb-1 text-xs font-semibold text-gray-600",children:h("graph.controls.layout")}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("button",{onClick:()=>y("breadthfirst"),className:"rounded px-2 py-1 text-xs font-medium transition ".concat("breadthfirst"===f?"bg-purple-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:h("graph.controls.tree")}),(0,r.jsx)("button",{onClick:()=>y("circle"),className:"rounded px-2 py-1 text-xs font-medium transition ".concat("circle"===f?"bg-purple-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:h("graph.controls.circle")}),(0,r.jsx)("button",{onClick:()=>y("concentric"),className:"rounded px-2 py-1 text-xs font-medium transition ".concat("concentric"===f?"bg-purple-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:h("graph.controls.risk")})]})]}),(0,r.jsx)("button",{onClick:()=>{var e;null===(e=m.current)||void 0===e||e.fit(void 0,50)},className:"rounded-lg bg-white px-3 py-2 text-sm shadow-md hover:bg-gray-50",title:h("graph.controls.fit"),children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,r.jsx)("button",{onClick:()=>{var e;null===(e=m.current)||void 0===e||e.center()},className:"rounded-lg bg-white px-3 py-2 text-sm shadow-md hover:bg-gray-50",title:h("graph.controls.center"),children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,r.jsx)("button",{onClick:()=>{var e,t;null===(e=m.current)||void 0===e||e.zoom(1),null===(t=m.current)||void 0===t||t.center()},className:"rounded-lg bg-white px-3 py-2 text-sm shadow-md hover:bg-gray-50",title:h("graph.controls.resetZoom"),children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),(0,r.jsx)("button",{onClick:()=>{if(!m.current)return;let e=m.current.png({scale:2,full:!0}),t=document.createElement("a");t.href=e,t.download="graph-export.png",t.click()},className:"rounded-lg bg-white px-3 py-2 text-sm shadow-md hover:bg-gray-50",title:h("graph.controls.export"),children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]}),(0,r.jsx)("div",{ref:u,style:{height:c,width:"100%"},className:"rounded-lg border"}),p&&(0,r.jsxs)("div",{className:"absolute bottom-4 left-4 z-10 w-80 rounded-lg bg-white p-4 shadow-lg",children:[(0,r.jsx)("h3",{className:"mb-2 text-lg font-bold",children:h("graph.nodeDetails")}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.address"),":"]})," ",(0,r.jsx)("span",{className:"font-mono",children:p.address})]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.type"),":"]})," ",p.nodeType]}),p.balance&&(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.balance"),":"]})," ",p.balance," ETH"]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.risk"),":"]})," ",(0,r.jsx)("span",{className:"rounded px-2 py-1 text-xs font-bold text-white",style:{backgroundColor:j(p.riskLevel)},children:p.riskLevel.toUpperCase()})]}),p.isSanctioned&&(0,r.jsx)("p",{className:"rounded bg-red-100 p-2 text-red-800",children:h("graph.status.sanctioned")})]})]}),g&&(0,r.jsxs)("div",{className:"absolute bottom-4 left-4 z-10 w-80 rounded-lg bg-white p-4 shadow-lg",children:[(0,r.jsx)("h3",{className:"mb-2 text-lg font-bold",children:h("graph.edgeDetails")}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.amount"),":"]})," ",g.amount," ETH"]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.timestamp"),":"]})," ",new Date(g.timestamp).toLocaleString()]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("span",{className:"font-semibold",children:[h("graph.fields.txHash"),":"]})," ",(0,r.jsx)("span",{className:"font-mono text-xs",children:g.txHash})]}),g.isSuspicious&&(0,r.jsx)("p",{className:"rounded bg-red-100 p-2 text-red-800",children:h("graph.status.suspicious")})]})]}),(0,r.jsxs)("div",{className:"absolute bottom-4 right-4 z-10 rounded-lg bg-white p-4 shadow-md",children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-bold",children:h("graph.legend")}),(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:"#3b82f6"}}),(0,r.jsx)("span",{children:h("graph.nodeTypes.wallet")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,r.jsx)("span",{children:h("graph.nodeTypes.exchange")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,r.jsx)("span",{children:h("graph.nodeTypes.mixer")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:"#06b6d4"}}),(0,r.jsx)("span",{children:h("graph.nodeTypes.contract")})]})]})]})]})}}}]);