<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        
        body {
            font-family: "Noto Sans JP", "MS PGothic", sans-serif;
            font-size: 10pt;
            line-height: 1.6;
            color: #333;
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #0ea5e9;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #0ea5e9;
            font-size: 24pt;
            margin: 0 0 10px 0;
        }
        
        .header .subtitle {
            font-size: 14pt;
            color: #666;
        }
        
        .metadata {
            background-color: #f0f9ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .metadata table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .metadata td {
            padding: 5px;
            border-bottom: 1px solid #ddd;
        }
        
        .metadata td:first-child {
            font-weight: bold;
            width: 30%;
        }
        
        .section {
            margin-bottom: 30px;
        }
        
        .section h2 {
            color: #0ea5e9;
            font-size: 16pt;
            border-bottom: 2px solid #0ea5e9;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        
        .section h3 {
            color: #333;
            font-size: 12pt;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        .risk-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: white;
        }
        
        .risk-high { background-color: #ef4444; }
        .risk-medium { background-color: #f59e0b; }
        .risk-low { background-color: #22c55e; }
        .risk-none { background-color: #64748b; }
        
        .findings-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .findings-list li {
            padding: 10px;
            margin-bottom: 10px;
            background-color: #f9fafb;
            border-left: 4px solid #0ea5e9;
        }
        
        .pattern-card {
            background-color: #fff7ed;
            border: 1px solid #fed7aa;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .pattern-card h4 {
            color: #ea580c;
            margin-top: 0;
        }
        
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 9pt;
            color: #666;
        }
        
        .signature-box {
            background-color: #f0fdf4;
            border: 2px solid #22c55e;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .signature-box h3 {
            color: #22c55e;
            margin-top: 0;
        }
        
        .signature-box code {
            background-color: #fff;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 9pt;
            word-break: break-all;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        
        th {
            background-color: #0ea5e9;
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f9fafb;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
        <h1>ğŸ” ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <div class="subtitle">{{ title }}</div>
    </div>
    
    <!-- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ -->
    <div class="metadata">
        <table>
            <tr>
                <td>æ¡ˆä»¶ç•ªå·</td>
                <td><strong>{{ case_number }}</strong></td>
            </tr>
            <tr>
                <td>å¯¾è±¡ã‚¢ãƒ‰ãƒ¬ã‚¹</td>
                <td><code>{{ target_address }}</code></td>
            </tr>
            <tr>
                <td>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³</td>
                <td>{{ blockchain | upper }}</td>
            </tr>
            <tr>
                <td>ãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢</td>
                <td>
                    {{ risk_score }} / 100
                    <span class="risk-badge risk-{{ risk_level }}">{{ risk_level | upper }}</span>
                </td>
            </tr>
            <tr>
                <td>èª¿æŸ»å®Ÿæ–½è€…</td>
                <td>{{ investigator_name }}</td>
            </tr>
            <tr>
                <td>ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ—¥æ™‚</td>
                <td>{{ generated_at }}</td>
            </tr>
        </table>
    </div>
    
    <!-- ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ -->
    <div class="section">
        <h2>1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼</h2>
        <p>{{ executive_summary }}</p>
    </div>
    
    <!-- èª¿æŸ»æ¦‚è¦ -->
    <div class="section">
        <h2>2. èª¿æŸ»æ¦‚è¦</h2>
        
        <h3>2.1 èª¿æŸ»ç›®çš„</h3>
        <p>
            æœ¬èª¿æŸ»ã¯ã€å¯¾è±¡ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆ{{ target_address }}ï¼‰ã«é–¢é€£ã™ã‚‹
            å–å¼•ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã€ãƒãƒãƒ¼ãƒ­ãƒ³ãƒ€ãƒªãƒ³ã‚°ç­‰ã®ä¸æ­£è¡Œç‚ºã®æœ‰ç„¡ã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
        </p>
        
        <h3>2.2 èª¿æŸ»ç¯„å›²</h3>
        <ul>
            <li>å¯¾è±¡ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³: {{ blockchain | upper }}</li>
            <li>åˆ†æãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ•°: {{ total_transactions }}ä»¶</li>
            <li>é–¢é€£ã‚¢ãƒ‰ãƒ¬ã‚¹æ•°: {{ total_addresses }}å€‹</li>
            <li>ç·å–å¼•é‡: {{ "%.4f"|format(total_volume) }} {{ blockchain | upper }}</li>
        </ul>
        
        <h3>2.3 èª¿æŸ»æ‰‹æ³•</h3>
        <p>
            ä»¥ä¸‹ã®æ‰‹æ³•ã‚’ç”¨ã„ã¦åŒ…æ‹¬çš„ãªåˆ†æã‚’å®Ÿæ–½ã—ã¾ã—ãŸï¼š
        </p>
        <ul>
            <li>ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®è¿½è·¡</li>
            <li>è³‡é‡‘ãƒ•ãƒ­ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¯è¦–åŒ–</li>
            <li>ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ãŠã‚ˆã³AIé§†å‹•ã®ç•°å¸¸æ¤œçŸ¥</li>
            <li>åˆ¶è£ãƒªã‚¹ãƒˆã¨ã®ç…§åˆ</li>
            <li>æ—¢çŸ¥ã®é«˜ãƒªã‚¹ã‚¯ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ã®é–¢é€£æ€§åˆ†æ</li>
        </ul>
    </div>
    
    <!-- ä¸»è¦ç™ºè¦‹ -->
    <div class="section">
        <h2>3. ä¸»è¦ç™ºè¦‹</h2>
        
        {% if key_findings %}
        <ul class="findings-list">
            {% for finding in key_findings %}
            <li>{{ finding }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p>ç‰¹ç­†ã™ã¹ãé‡è¦ãªç™ºè¦‹äº‹é …ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        {% endif %}
    </div>
    
    <!-- æ¤œå‡ºã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ -->
    <div class="section">
        <h2>4. æ¤œå‡ºã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³</h2>
        
        {% if detected_patterns %}
            {% for pattern in detected_patterns %}
            <div class="pattern-card">
                <h4>âš ï¸ {{ pattern.type }} ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¿¡é ¼åº¦: {{ pattern.confidence * 100 }}%ï¼‰</h4>
                <p><strong>èª¬æ˜:</strong> {{ pattern.description }}</p>
                <p><strong>é–¢é€£ã‚¢ãƒ‰ãƒ¬ã‚¹æ•°:</strong> {{ pattern.addresses_count }}</p>
                <p><strong>ç·å–å¼•é¡:</strong> {{ "%.4f"|format(pattern.total_amount) }} {{ blockchain | upper }}</p>
            </div>
            {% endfor %}
        {% else %}
        <p>ç–‘ã‚ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        {% endif %}
    </div>
    
    <!-- ãƒªã‚¹ã‚¯è©•ä¾¡ -->
    <div class="section">
        <h2>5. ãƒªã‚¹ã‚¯è©•ä¾¡</h2>
        
        <h3>5.1 ç·åˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢</h3>
        <p>
            æœ¬èª¿æŸ»ã®çµæœã€å¯¾è±¡ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ç·åˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢ã¯ <strong>{{ risk_score }}/100</strong> ã¨
            è©•ä¾¡ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã¯ã€Œ<span class="risk-badge risk-{{ risk_level }}">{{ risk_level | upper }}</span>ã€
            ãƒªã‚¹ã‚¯ã«åˆ†é¡ã•ã‚Œã¾ã™ã€‚
        </p>
        
        <h3>5.2 ãƒªã‚¹ã‚¯è¦å› ã®å†…è¨³</h3>
        <table>
            <thead>
                <tr>
                    <th>ãƒªã‚¹ã‚¯è¦å› </th>
                    <th>ã‚¹ã‚³ã‚¢å½±éŸ¿</th>
                    <th>èª¬æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ãƒŸã‚­ã‚·ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨</td>
                    <td>+30</td>
                    <td>Tornado Cashç­‰ã®ãƒŸã‚­ã‚·ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®å–å¼•ãŒç¢ºèªã•ã‚Œã¾ã—ãŸ</td>
                </tr>
                <tr>
                    <td>ãƒ¬ã‚¤ãƒ¤ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³</td>
                    <td>+25</td>
                    <td>è¤‡æ•°ã®ä¸­é–“ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’çµŒç”±ã—ãŸè³‡é‡‘ç§»å‹•ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ</td>
                </tr>
                <tr>
                    <td>å¤§å£å–å¼•</td>
                    <td>+20</td>
                    <td>é–¾å€¤ã‚’è¶…ãˆã‚‹å¤§è¦æ¨¡å–å¼•ãŒç¢ºèªã•ã‚Œã¾ã—ãŸ</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="section">
        <h2>6. æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h2>
        
        <h3>6.1 å³åº§ã«å®Ÿæ–½ã™ã¹ãå¯¾å¿œ</h3>
        <ul>
            <li>é–¢é€£å–å¼•ã®è©³ç´°èª¿æŸ»ã®ç¶™ç¶š</li>
            <li>è©²å½“ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ç›£è¦–ãƒªã‚¹ãƒˆã¸ã®è¿½åŠ </li>
            <li>å¿…è¦ã«å¿œã˜ãŸæ³•åŸ·è¡Œæ©Ÿé–¢ã¸ã®é€šå ±æ¤œè¨</li>
        </ul>
        
        <h3>6.2 è¿½åŠ èª¿æŸ»ã®æ¨å¥¨äº‹é …</h3>
        <ul>
            <li>æ¤œå‡ºã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã«é–¢é€£ã™ã‚‹ä»–ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã®èª¿æŸ»</li>
            <li>ã‚ˆã‚Šé•·æœŸé–“ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´ã®åˆ†æ</li>
            <li>ã‚ªãƒ•ãƒã‚§ãƒ¼ãƒ³æƒ…å ±ï¼ˆKYCæƒ…å ±ç­‰ï¼‰ã¨ã®ç…§åˆ</li>
        </ul>
    </div>
    
    <!-- è¨¼æ‹ æ€§æ‹…ä¿ -->
    <div class="signature-box">
        <h3>ğŸ” è¨¼æ‹ æ€§æ‹…ä¿æƒ…å ±</h3>
        <p><strong>ãƒ¬ãƒãƒ¼ãƒˆID:</strong> {{ investigation_id }}</p>
        <p><strong>ç”Ÿæˆæ—¥æ™‚:</strong> {{ generated_at }} (UTC)</p>
        <p><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ç½²å:</strong><br><code>SHA256:{{ digital_signature if digital_signature else 'N/A' }}</code></p>
        <p><strong>æ¤œè¨¼ç”¨ãƒãƒƒã‚·ãƒ¥:</strong><br><code>{{ content_hash if content_hash else 'N/A' }}</code></p>
        <p style="font-size: 9pt; margin-top: 10px; color: #666;">
            â€» ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ç½²åã«ã‚ˆã‚Šã€ç”Ÿæˆæ™‚ç‚¹ã§ã®å†…å®¹ã®çœŸæ­£æ€§ãŒä¿è¨¼ã•ã‚Œã¦ã„ã¾ã™ã€‚
        </p>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <div class="footer">
        <p>
            <strong>å…è²¬äº‹é …:</strong> æœ¬ãƒ¬ãƒãƒ¼ãƒˆã¯ã€å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãåˆ†æçµæœã§ã‚ã‚Šã€
            æ³•çš„åŠ©è¨€ã‚’æ§‹æˆã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å®Ÿéš›ã®æ³•çš„æ‰‹ç¶šãã«ãŠã„ã¦ã¯ã€å°‚é–€å®¶ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
        </p>
        <p style="text-align: center; margin-top: 20px;">
            Â© {{ generated_at[:4] }} MetaSleuth NextGen. All rights reserved.<br>
            Generated by MetaSleuth NextGen Blockchain Investigation Platform
        </p>
    </div>
</body>
</html>
